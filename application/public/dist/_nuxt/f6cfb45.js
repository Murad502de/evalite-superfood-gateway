(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{800:function(e,t,r){"use strict";r.r(t);var n=r(3),c=(r(30),r(27),r(6),r(373)),o=r(758),m=r(759),l=r(575),d=r(371);t.default={components:{AppCard:l.a,AppButton:d.a},props:{},data:function(){return{valid:!0,loading:!1,fetching:!1,amocrmSubdomain:"",amocrmSubdomainRules:[c.k()],amocrmRedirectUri:"",amocrmRedirectUriRules:[c.k(),c.l()],amocrmClientSecret:"",amocrmClientSecretRules:[c.k()],amocrmUtmSourceId:"",amocrmUtmSourceIdRules:[c.k(),c.c()],personalLinkHost:"",personalLinkHostRules:[c.k(),c.l()],minPayout:"",minPayoutRules:[c.k(),c.c()],percentage:"",percentageRules:[c.k(),c.c()],percentageLevels:[]}},computed:{},watch:{},methods:{deletePercentageLevel:function(e){this.percentageLevels=this.percentageLevels.filter((function(t){return t.uuid!==e}))},addPercentageLevel:function(){this.percentageLevels.push({uuid:(new Date).getTime(),percentage:0})},save:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=9;break}return e.loading=!0,r={amocrmSubdomain:e.amocrmSubdomain,amocrmRedirectUri:e.amocrmRedirectUri,amocrmClientSecret:e.amocrmClientSecret,amocrmUtmSourceId:e.amocrmUtmSourceId,personalLinkHost:e.personalLinkHost,minPayout:e.minPayout,percentage:e.percentage,percentageLevels:e.percentageLevels},t.next=5,Object(m.a)(r);case 5:n=t.sent,console.debug("configurationsCreateResponse",n),200!==n.status&&alert("Ошибка сохранения настроек"),e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetching=!0,t.next=3,Object(o.a)();case 3:r=t.sent,console.debug("configurationsReadResponse",r),200===r.status||201===r.status?(data=r.data.data,e.amocrmSubdomain=data.amocrm_subdomain,e.amocrmRedirectUri=data.amocrm_redirect_uri,e.amocrmClientSecret=data.amocrm_client_secret,e.amocrmUtmSourceId=data.amocrm_utm_source_id,e.personalLinkHost=data.personal_link_host,e.minPayout=data.min_payout,e.percentage=data.percentage,e.percentageLevels=data.percentage_levels,e.fetching=!1):alert("Ошибка получения текущих настроек");case 6:case"end":return t.stop()}}),t)})))()},mounted:function(){}}}}]);